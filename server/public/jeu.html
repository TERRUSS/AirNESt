<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Airnest</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Share+Tech+Mono" rel="stylesheet">
  <style media="screen">
    * {
      font-family: 'Share Tech Mono', monospace;
    }
  </style>
  <!-- Bulma Version 0.7.4-->

  <link rel="stylesheet" href="https://unpkg.com/bulma@0.7.4/css/bulma.min.css" />
  <link href="https://unpkg.com/nes.css@latest/css/nes.min.css" rel="stylesheet" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <script src="https://w.soundcloud.com/player/api.js"></script>
</head>

<body class="has-background-grey">
  <div class="navbar  has-background-grey-lighter" style="padding: 0 100px 0 100px;">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <img src="/images/logo.png" width="100" alt="Logo">
      </a>
    </div>
    <div id="navbarMenu" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item is-active" href="/">Home</a>
        <a class="navbar-item" href="/team">Team</a>
        <a class="navbar-item" href="/help">Help</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-item" href="/">
            <i class="material-icons">person_outline</i>
          </a>

          <div class="navbar-dropdown">
            <a class="navbar-item">Dashboard</a>
            <a class="navbar-item">Profile</a>
            <a class="Settings">
              <hr class="navbar-divider">
              <div class="navbar-item">Logout</div>
              </hr>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  </br>
  </br>


  <!-- SOUNDCLOUD  -->
  <div id="soundcloud_player">
    <iframe src="https://w.soundcloud.com/player/?url=/eggscelent/sets/chiptune&auto_play=false" width=100% height=100%></iframe>
  </div>

  <script type="text/javascript">
    let widget = null;
    let song_indexes = new Array();
    let current_index = 0;

    $(function() {
      let iframe = document.querySelector('#soundcloud_player iframe');
      widget = SC.Widget(iframe);
    });
  </script>

  <style media="screen">
    #soundcloud_player{
      position: fixed;
      width: 20vw;
      /* height: 50vh; */
      top: 20vh;
      right: 3vw;
    }
  </style>

  <!-- END SOUNDCLOUD  -->

  <div class="columns body-columns">
    <div class="column is-half is-offset-one-quarter">
      <div class="card has-background-grey-lighter " style="border-style: outset; border-width: 3px;">
        <div class="header has-background-grey-lighter">
        </div>
        <center>
          <div class="hero-body" id="emulator"></div>
        </center>
        <script src="http://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js" charset="utf-8"></script>

        <script src="js/controller.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/websockets.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/display.js" type="text/javascript" charset="utf-8"></script>

        <script src="JSNES/lib/jquery-1.4.2.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="JSNES/lib/dynamicaudio-min.js" type="text/javascript" charset="utf-8"></script>
        <script src="JSNES/source/nes.js" type="text/javascript" charset="utf-8"></script>
        <script src="JSNES/source/utils.js" type="text/javascript" charset="utf-8"></script>
        <script src="JSNES/source/cpu.js" type="text/javascript" charset="utf-8"></script>
        <script src="JSNES/source/keyboard.js" type="text/javascript" charset="utf-8"></script>
        <script src="JSNES/source/mappers.js" type="text/javascript" charset="utf-8"></script>
        <script src="JSNES/source/papu.js" type="text/javascript" charset="utf-8"></script>
        <script src="JSNES/source/ppu.js" type="text/javascript" charset="utf-8"></script>
        <script src="JSNES/source/rom.js" type="text/javascript" charset="utf-8"></script>
        <script src="JSNES/source/ui.js" type="text/javascript" charset="utf-8"></script>

        <script type="text/javascript" charset="utf-8">
          let nes;
          $(function() {
            window.romSelect = "roms/" + window.location.search.substr(1) + ".nes";
            nes = new JSNES({
              'ui': $('#emulator').JSNESUI({
                "Homebrew": [
                  ['Concentration Room', 'roms/croom/croom.nes'],
                  ['LJ65', 'roms/lj65/lj65.nes'],
                ]
              })
            }, function() {
              setTimeout(function() {
                $("#zoom").trigger('click');
                $("#zoom").trigger('click');
              }, 3000);
            });
          });
        </script>
        <style media="screen">
          #bulle {
            margin-top: -150px;
          }
        </style>

        <div class="card-content" style="padding-top: 0;">
          <div class="level is-mobile">
            <div class="level-left">
              <div class="level-item has-text-centered">
                <i class="nes-icon is-medium heart is-empty" id="coeur_jeu"></i>
                <strong id="nombre_like">20</strong>
              </div>
              <div class="level-item has-text-centered ">
                <i class="nes-logo" id="nes_logo"></i>
                <div class="nes-balloon from-left" id="bulle">
                  <span>Scann this :</span>
                  <center id="qrcode"></center>
                  <span>...or type "oui" in the app </br>to connect your phone !</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card-footer">
          <div class="columns is-mobile">
            <div class="column is-11">
              <div class="field">
                <div class="control">
                  <label for="textarea_field">Comments</label>
                  <textarea id="textarea_field" class="nes-textarea"> </textarea>
                </div>
              </div>
            </div>
            <div class="column has-text-centered">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    let qrcode = new QRCode("qrcode", {
      text: "oui",
      width: 100,
      height: 100,
      colorDark: "#000000",
      colorLight: "#ffffff",
      // correctLevel : QRCode.CorrectLevel.H
    });
  </script>

  <script>
    let like_page = false;
    let nombre_like = document.getElementById('nombre_like');
    likes = nombre_like.innerHTML;
    likes = parseInt(likes);

    let like_jeu = false;
    let coeur_jeu = document.getElementById('coeur_jeu');

    coeur_jeu.addEventListener('click', function() {
      if (like_jeu == false) {
        coeur_jeu.setAttribute('class', 'nes-icon is-medium heart');
        like_jeu = true;
        likes += 1;
      } else if (like_jeu == true) {
        coeur_jeu.setAttribute('class', 'nes-icon is-medium heart is-empty');
        like_jeu = false;
        likes -= 1;
      }

      nombre_like.innerHTML = likes;
    });

    let bulle = document.getElementById('bulle');
    let nes_logo = document.getElementById('nes_logo');

    nes_logo.addEventListener('mouseover', function() {
      bulle.setAttribute('style', '  z-index: 8; background-color: white; color: black; visibility: visible; opacity : 0.8; ');
    });

    nes_logo.addEventListener('mouseout', function() {
      bulle.setAttribute('style', '  z-index: 8; background-color: white; visibility: hidden; ');
    });
  </script>


  <style>
    #bulle {

      z-index: 8;
      background-color: white;
      visibility: hidden;
      position: relative;
      top: -2em;
      left: 19em;
    }

    #titre {
      color: #E32C06;
    }

    #nes_logo {
      position: relative;
      left: 20em;
      top: 0em;
    }
  </style>

  <footer class="footer has-background-grey-darker">
    <div class="container is-fluid">
      <div class="content has-text-centered" id="fin">
        <p>
          Airnest by
          <a href="https://github.com/Arveto">Arveto</a>. The website content is licensed
        </p>
      </div>
    </div>
  </footer>
</body>

</html>
